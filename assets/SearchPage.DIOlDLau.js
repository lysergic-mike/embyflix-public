import{d as e,o as s,i as l,p as a,c as t,b as i,f as r,q as n,t as u,z as o,j as c,y as v,H as d,C as h,F as f,e as y,n as m,A as g,k as p,u as k,g as b}from"./vue-vendor.C6XCEWs1.js";import{w as F,u as T,c as w,a as C,x as Q,r as R,e as S,b as x}from"./composables.C_I0WkG_.js";import{b as K,C as N,_ as A}from"./components.DC4RnbFf.js";const I={class:"search-page"},B={class:"search-layout"},M={key:0,class:"filters-sidebar"},E={class:"sidebar-header"},G={key:0,class:"sort-section"},$={for:"sort-select",class:"sort-label"},_={class:"filter-section"},D={class:"filter-chips-vertical"},j=["onClick","onKeydown"],H={key:0,class:"fas fa-check"},L={class:"filter-section"},U={class:"filter-chips-vertical"},Z={key:0,class:"fas fa-check"},q={key:0,class:"fas fa-check"},V={key:0,class:"fas fa-check"},O={key:1,class:"filter-section"},P={class:"filter-chips-vertical scrollable"},z=["onClick","onKeydown"],W={key:0,class:"fas fa-check"},Y={key:2,class:"filter-section"},J={class:"filter-chips-vertical scrollable"},X=["onClick","onKeydown"],ee={key:0,class:"fas fa-check"},se={class:"results-main"},le={key:0,class:"results-summary"},ae={key:1,class:"loading-state"},te={key:2,class:"error-state"},ie={key:3,class:"empty-state"},re={key:4,class:"no-results-state"},ne={key:5,class:"results-container"},ue={class:"group-header"},oe={class:"group-count"},ce={class:"results-grid"},ve=A(e({__name:"SearchPage",setup(e){const A=p(),ve=k(),de=F(),he=x(),fe=C(),ye=T(),me=w(he,ye,fe.isDemoMode),ge=Q(fe.isDemoMode),pe=S();R("Home"),s(()=>{de.setFilter(["Movie","Series"])}),l(()=>A.query.q,e=>{const s=e||"";s!==de.searchQuery.value&&(de.searchQuery.value=s)},{immediate:!0}),l(()=>de.searchResults.value,(e,s)=>{!de.isSearching.value&&e.length>0&&e!==s&&de.searchQuery.value&&ge.trackSearchEvent(de.searchQuery.value,{genres:de.filters.value.genres,studios:de.filters.value.studios,itemTypes:de.filters.value.itemTypes})});const ke=e=>me.getImageUrl(e.Id,"Primary",N.MEDIA_CARD_DEFAULT),be=a(()=>{if(de.isSearching.value)return"Searching...";if(!de.searchQuery.value)return"Enter a search term to find movies, TV shows, and more";if(0===de.searchResults.value.length)return`No results found for "${de.searchQuery.value}"`;const e=de.filteredResults.value.length,s=de.searchResults.value.length;return e!==s?`Showing ${e} of ${s} results for "${de.searchQuery.value}"`:`${e} result${1!==e?"s":""} for "${de.searchQuery.value}"`});return(e,s)=>{return b(),t("div",I,[i("div",B,[n(de).searchQuery.value?(b(),t("aside",M,[i("div",E,[i("h3",null,"Filters ("+u(n(de).filters.value.itemTypes.length+n(de).filters.value.genres.length+n(de).filters.value.studios.length+n(de).filters.value.tags.length+("any"!==n(de).filters.value.runtime?1:0)+("any"!==n(de).filters.value.criticRating?1:0))+")",1),n(de).filters.value.itemTypes.length>0||n(de).filters.value.genres.length>0||n(de).filters.value.studios.length>0||n(de).filters.value.tags.length>0||"any"!==n(de).filters.value.runtime||"any"!==n(de).filters.value.criticRating?(b(),t("button",{key:0,class:"clear-filters-btn",tabindex:"0",onClick:s[0]||(s[0]=e=>n(de).clearFilters()),onKeydown:s[1]||(s[1]=o(e=>n(de).clearFilters(),["enter"]))}," Clear All ",32)):r("",!0)]),n(de).searchQuery.value?(b(),t("div",G,[i("label",$,[s[10]||(s[10]=v(" Sort by: ",-1)),i("strong",null,u((l=n(de).filters.value.sortBy,{relevance:"Best Match","name-asc":"Name (A-Z)","name-desc":"Name (Z-A)","date-newest":"Newest First","date-oldest":"Oldest First","critic-high":"Critics (High)","critic-low":"Critics (Low)"}[l]||"Best Match")),1)]),c(i("select",{id:"sort-select","onUpdate:modelValue":s[2]||(s[2]=e=>n(de).filters.value.sortBy=e),class:"sort-select",tabindex:"2",onChange:s[3]||(s[3]=e=>n(de).setSortBy(n(de).filters.value.sortBy))},[...s[11]||(s[11]=[h('<option value="relevance" data-v-de225202>Best Match</option><option value="name-asc" data-v-de225202>Name (A-Z)</option><option value="name-desc" data-v-de225202>Name (Z-A)</option><option value="date-newest" data-v-de225202>Newest First</option><option value="date-oldest" data-v-de225202>Oldest First</option><option value="critic-high" data-v-de225202>Critics (High)</option><option value="critic-low" data-v-de225202>Critics (Low)</option>',7)])],544),[[d,n(de).filters.value.sortBy]])])):r("",!0),i("div",_,[s[12]||(s[12]=i("h4",{class:"filter-section-title"},"Content Format",-1)),i("div",D,[(b(!0),t(f,null,y(n(de).availableTypes.value,e=>(b(),t("button",{key:e,class:m(["filter-chip",{active:n(de).isTypeFiltered(e)}]),tabindex:"0",onClick:s=>n(de).toggleFilter(e),onKeydown:o(s=>n(de).toggleFilter(e),["enter"])},[i("span",null,u(n(pe).formatTypeName(e)),1),n(de).isTypeFiltered(e)?(b(),t("i",H)):r("",!0)],42,j))),128))])]),i("div",L,[s[16]||(s[16]=i("h4",{class:"filter-section-title"},"Quick Watch",-1)),i("div",U,[i("button",{class:m(["filter-chip",{active:"short"===n(de).filters.value.runtime}]),tabindex:"0",onClick:s[4]||(s[4]=e=>n(de).setRuntime("short")),onKeydown:s[5]||(s[5]=o(e=>n(de).setRuntime("short"),["enter"]))},[s[13]||(s[13]=i("span",null,"Under 30 Min",-1)),"short"===n(de).filters.value.runtime?(b(),t("i",Z)):r("",!0)],34),i("button",{class:m(["filter-chip",{active:"medium"===n(de).filters.value.runtime}]),tabindex:"0",onClick:s[6]||(s[6]=e=>n(de).setRuntime("medium")),onKeydown:s[7]||(s[7]=o(e=>n(de).setRuntime("medium"),["enter"]))},[s[14]||(s[14]=i("span",null,"1-2 Hours",-1)),"medium"===n(de).filters.value.runtime?(b(),t("i",q)):r("",!0)],34),i("button",{class:m(["filter-chip",{active:"long"===n(de).filters.value.runtime||"verylong"===n(de).filters.value.runtime}]),tabindex:"0",onClick:s[8]||(s[8]=e=>n(de).setRuntime("long"===n(de).filters.value.runtime||"verylong"===n(de).filters.value.runtime?"any":"long")),onKeydown:s[9]||(s[9]=o(e=>n(de).setRuntime("long"===n(de).filters.value.runtime||"verylong"===n(de).filters.value.runtime?"any":"long"),["enter"]))},[s[15]||(s[15]=i("span",null,"Full Feature (2hr+)",-1)),"long"===n(de).filters.value.runtime||"verylong"===n(de).filters.value.runtime?(b(),t("i",V)):r("",!0)],34)])]),n(de).availableGenres.value.length>0?(b(),t("div",O,[s[17]||(s[17]=i("h4",{class:"filter-section-title"},"Genres",-1)),i("div",P,[(b(!0),t(f,null,y(n(de).availableGenres.value,e=>(b(),t("button",{key:e,class:m(["filter-chip",{active:n(de).isGenreFiltered(e)}]),tabindex:"0",onClick:s=>n(de).toggleGenre(e),onKeydown:o(s=>n(de).toggleGenre(e),["enter"])},[i("span",null,u(e),1),n(de).isGenreFiltered(e)?(b(),t("i",W)):r("",!0)],42,z))),128))])])):r("",!0),n(de).availableTags.value.length>0?(b(),t("div",Y,[s[18]||(s[18]=i("h4",{class:"filter-section-title"},"Tags",-1)),i("div",J,[(b(!0),t(f,null,y(n(de).availableTags.value,e=>(b(),t("button",{key:e,class:m(["filter-chip",{active:n(de).isTagFiltered(e)}]),tabindex:"0",onClick:s=>n(de).toggleTag(e),onKeydown:o(s=>n(de).toggleTag(e),["enter"])},[i("span",null,u(e),1),n(de).isTagFiltered(e)?(b(),t("i",ee)):r("",!0)],42,X))),128))])])):r("",!0)])):r("",!0),i("main",se,[n(de).searchQuery.value?(b(),t("div",le,[i("p",null,u(be.value),1)])):r("",!0),n(de).isSearching.value?(b(),t("div",ae,[...s[19]||(s[19]=[i("i",{class:"fas fa-spinner fa-spin"},null,-1),i("p",null,"Searching...",-1)])])):n(de).searchError.value?(b(),t("div",te,[s[20]||(s[20]=i("i",{class:"fas fa-exclamation-circle"},null,-1)),i("p",null,u(n(de).searchError.value),1)])):n(de).searchQuery.value?0===n(de).filteredResults.value.length&&n(de).searchQuery.value?(b(),t("div",re,[...s[22]||(s[22]=[i("i",{class:"fas fa-film-slash"},null,-1),i("h2",null,"No Results Found",-1),i("p",null,"Try adjusting your search or filters",-1)])])):(b(),t("div",ne,[(b(!0),t(f,null,y(n(de).groupedResults.value,(e,s)=>(b(),t("div",{key:s,class:"results-group"},[i("div",ue,[i("i",{class:m(n(pe).getTypeIcon(s))},null,2),i("h2",null,u(n(pe).formatTypeName(s)),1),i("span",oe,u(e.length),1)]),i("div",ce,[(b(!0),t(f,null,y(e,e=>(b(),g(K,{key:e.Id,item:e,"image-url":ke(e),onClick:s=>(e=>{de.searchQuery.value&&ge.trackSearchEvent(de.searchQuery.value,{genres:de.filters.value.genres,studios:de.filters.value.studios,itemTypes:de.filters.value.itemTypes},e.Id),ve.push({name:"Details",params:{itemId:e.Id}})})(e)},null,8,["item","image-url","onClick"]))),128))])]))),128))])):(b(),t("div",ie,[...s[21]||(s[21]=[i("i",{class:"fas fa-search"},null,-1),i("h2",null,"Search Your Library",-1),i("p",null,"Find movies, TV shows, episodes, and more",-1)])]))])])]);var l}}}),[["__scopeId","data-v-de225202"]]);export{ve as default};
