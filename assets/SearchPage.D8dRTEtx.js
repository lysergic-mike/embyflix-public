import{d as e,r as s,o as a,l,m as t,k as i,c as r,b as n,v as u,f as c,x as o,z as v,n as d,p as h,t as f,y,H as m,C as g,F as p,e as k,A as b,u as w,g as F}from"./vue-vendor.B0WUDMXT.js";import{x as C,u as T,c as Q,a as R,y as S,s as x,e as K,b as q}from"./composables.CNmb4RHD.js";import{b as N,C as A,_ as B}from"./components.BQNxwHwS.js";const I={class:"search-page"},M={class:"search-input-container","data-nav-zone":"search-input"},E={class:"search-wrapper"},G={class:"search-layout"},$={key:0,class:"filters-sidebar","data-nav-zone":"search-filters"},_={class:"sidebar-header"},D={key:0,class:"sort-section"},H={for:"sort-select",class:"sort-label"},U={class:"filter-section"},j={class:"filter-chips-vertical"},z=["onClick","onKeydown"],L={key:0,class:"fas fa-check"},V={class:"filter-section"},Z={class:"filter-chips-vertical"},O={key:0,class:"fas fa-check"},P={key:0,class:"fas fa-check"},W={key:0,class:"fas fa-check"},Y={key:1,class:"filter-section"},J={class:"filter-chips-vertical scrollable"},X=["onClick","onKeydown"],ee={key:0,class:"fas fa-check"},se={key:2,class:"filter-section"},ae={class:"filter-chips-vertical scrollable"},le=["onClick","onKeydown"],te={key:0,class:"fas fa-check"},ie={class:"results-main","data-nav-zone":"search-results"},re={key:0,class:"results-summary"},ne={key:1,class:"loading-state"},ue={key:2,class:"error-state"},ce={key:3,class:"empty-state"},oe={key:4,class:"no-results-state"},ve={key:5,class:"results-container"},de={class:"group-header"},he={class:"group-count"},fe={class:"results-grid"},ye=B(e({__name:"SearchPage",setup(e){const B=l(),ye=w(),me=C(),ge=q(),pe=R(),ke=T(),be=Q(ge,ke,pe.isDemoMode),we=S(pe.isDemoMode),Fe=K(),Ce=s(""),Te=s(!1);x("Home"),a(()=>{me.setFilter(["Movie","Series"]),Ce.value=B.query.q||""}),t(()=>B.query.q,e=>{const s=e||"";s!==me.searchQuery.value&&(me.searchQuery.value=s),s!==Ce.value&&(Ce.value=s)},{immediate:!0}),t(Ce,e=>{const s=e.trim();s&&s!==B.query.q&&ye.replace({name:"Search",query:{q:s}})});const Qe=()=>{const e=Ce.value.trim();e&&ye.push({name:"Search",query:{q:e}})};t(()=>me.searchResults.value,(e,s)=>{!me.isSearching.value&&e.length>0&&e!==s&&me.searchQuery.value&&we.trackSearchEvent(me.searchQuery.value,{genres:me.filters.value.genres,studios:me.filters.value.studios,itemTypes:me.filters.value.itemTypes})});const Re=e=>be.getImageUrl(e.Id,"Primary",A.MEDIA_CARD_DEFAULT),Se=i(()=>{if(me.isSearching.value)return"Searching...";if(!me.searchQuery.value)return"Enter a search term to find movies, TV shows, and more";if(0===me.searchResults.value.length)return`No results found for "${me.searchQuery.value}"`;const e=me.filteredResults.value.length,s=me.searchResults.value.length;return e!==s?`Showing ${e} of ${s} results for "${me.searchQuery.value}"`:`${e} result${1!==e?"s":""} for "${me.searchQuery.value}"`});return(e,s)=>{return F(),r("div",I,[n("div",M,[n("div",E,[s[15]||(s[15]=n("i",{class:"fas fa-search search-icon"},null,-1)),u(n("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>Ce.value=e),type:"text",placeholder:"Search for movies, series, shows...",class:d(["search-input",{"search-input-focused":Te.value}]),onFocus:s[1]||(s[1]=e=>Te.value=!0),onBlur:s[2]||(s[2]=e=>Te.value=!1),onKeydown:v(Qe,["enter"]),tabindex:"0"},null,34),[[o,Ce.value]]),Ce.value?(F(),r("button",{key:0,class:"clear-search-btn",onClick:s[3]||(s[3]=e=>Ce.value=""),tabindex:"0"},[...s[14]||(s[14]=[n("i",{class:"fas fa-times"},null,-1)])])):c("",!0)])]),n("div",G,[h(me).searchQuery.value?(F(),r("aside",$,[n("div",_,[n("h3",null,"Filters ("+f(h(me).filters.value.itemTypes.length+h(me).filters.value.genres.length+h(me).filters.value.studios.length+h(me).filters.value.tags.length+("any"!==h(me).filters.value.runtime?1:0)+("any"!==h(me).filters.value.criticRating?1:0))+")",1),h(me).filters.value.itemTypes.length>0||h(me).filters.value.genres.length>0||h(me).filters.value.studios.length>0||h(me).filters.value.tags.length>0||"any"!==h(me).filters.value.runtime||"any"!==h(me).filters.value.criticRating?(F(),r("button",{key:0,class:"clear-filters-btn",tabindex:"0",onClick:s[4]||(s[4]=e=>h(me).clearFilters()),onKeydown:s[5]||(s[5]=v(e=>h(me).clearFilters(),["enter"]))}," Clear All ",32)):c("",!0)]),h(me).searchQuery.value?(F(),r("div",D,[n("label",H,[s[16]||(s[16]=y(" Sort by: ",-1)),n("strong",null,f((a=h(me).filters.value.sortBy,{relevance:"Best Match","name-asc":"Name (A-Z)","name-desc":"Name (Z-A)","date-newest":"Newest First","date-oldest":"Oldest First","critic-high":"Critics (High)","critic-low":"Critics (Low)"}[a]||"Best Match")),1)]),u(n("select",{id:"sort-select","onUpdate:modelValue":s[6]||(s[6]=e=>h(me).filters.value.sortBy=e),class:"sort-select",tabindex:"2",onChange:s[7]||(s[7]=e=>h(me).setSortBy(h(me).filters.value.sortBy))},[...s[17]||(s[17]=[g('<option value="relevance" data-v-40f683e7>Best Match</option><option value="name-asc" data-v-40f683e7>Name (A-Z)</option><option value="name-desc" data-v-40f683e7>Name (Z-A)</option><option value="date-newest" data-v-40f683e7>Newest First</option><option value="date-oldest" data-v-40f683e7>Oldest First</option><option value="critic-high" data-v-40f683e7>Critics (High)</option><option value="critic-low" data-v-40f683e7>Critics (Low)</option>',7)])],544),[[m,h(me).filters.value.sortBy]])])):c("",!0),n("div",U,[s[18]||(s[18]=n("h4",{class:"filter-section-title"},"Content Format",-1)),n("div",j,[(F(!0),r(p,null,k(h(me).availableTypes.value,e=>(F(),r("button",{key:e,class:d(["filter-chip",{active:h(me).isTypeFiltered(e)}]),tabindex:"0",onClick:s=>h(me).toggleFilter(e),onKeydown:v(s=>h(me).toggleFilter(e),["enter"])},[n("span",null,f(h(Fe).formatTypeName(e)),1),h(me).isTypeFiltered(e)?(F(),r("i",L)):c("",!0)],42,z))),128))])]),n("div",V,[s[22]||(s[22]=n("h4",{class:"filter-section-title"},"Quick Watch",-1)),n("div",Z,[n("button",{class:d(["filter-chip",{active:"short"===h(me).filters.value.runtime}]),tabindex:"0",onClick:s[8]||(s[8]=e=>h(me).setRuntime("short")),onKeydown:s[9]||(s[9]=v(e=>h(me).setRuntime("short"),["enter"]))},[s[19]||(s[19]=n("span",null,"Under 30 Min",-1)),"short"===h(me).filters.value.runtime?(F(),r("i",O)):c("",!0)],34),n("button",{class:d(["filter-chip",{active:"medium"===h(me).filters.value.runtime}]),tabindex:"0",onClick:s[10]||(s[10]=e=>h(me).setRuntime("medium")),onKeydown:s[11]||(s[11]=v(e=>h(me).setRuntime("medium"),["enter"]))},[s[20]||(s[20]=n("span",null,"1-2 Hours",-1)),"medium"===h(me).filters.value.runtime?(F(),r("i",P)):c("",!0)],34),n("button",{class:d(["filter-chip",{active:"long"===h(me).filters.value.runtime||"verylong"===h(me).filters.value.runtime}]),tabindex:"0",onClick:s[12]||(s[12]=e=>h(me).setRuntime("long"===h(me).filters.value.runtime||"verylong"===h(me).filters.value.runtime?"any":"long")),onKeydown:s[13]||(s[13]=v(e=>h(me).setRuntime("long"===h(me).filters.value.runtime||"verylong"===h(me).filters.value.runtime?"any":"long"),["enter"]))},[s[21]||(s[21]=n("span",null,"Full Feature (2hr+)",-1)),"long"===h(me).filters.value.runtime||"verylong"===h(me).filters.value.runtime?(F(),r("i",W)):c("",!0)],34)])]),h(me).availableGenres.value.length>0?(F(),r("div",Y,[s[23]||(s[23]=n("h4",{class:"filter-section-title"},"Genres",-1)),n("div",J,[(F(!0),r(p,null,k(h(me).availableGenres.value,e=>(F(),r("button",{key:e,class:d(["filter-chip",{active:h(me).isGenreFiltered(e)}]),tabindex:"0",onClick:s=>h(me).toggleGenre(e),onKeydown:v(s=>h(me).toggleGenre(e),["enter"])},[n("span",null,f(e),1),h(me).isGenreFiltered(e)?(F(),r("i",ee)):c("",!0)],42,X))),128))])])):c("",!0),h(me).availableTags.value.length>0?(F(),r("div",se,[s[24]||(s[24]=n("h4",{class:"filter-section-title"},"Tags",-1)),n("div",ae,[(F(!0),r(p,null,k(h(me).availableTags.value,e=>(F(),r("button",{key:e,class:d(["filter-chip",{active:h(me).isTagFiltered(e)}]),tabindex:"0",onClick:s=>h(me).toggleTag(e),onKeydown:v(s=>h(me).toggleTag(e),["enter"])},[n("span",null,f(e),1),h(me).isTagFiltered(e)?(F(),r("i",te)):c("",!0)],42,le))),128))])])):c("",!0)])):c("",!0),n("main",ie,[h(me).searchQuery.value?(F(),r("div",re,[n("p",null,f(Se.value),1)])):c("",!0),h(me).isSearching.value?(F(),r("div",ne,[...s[25]||(s[25]=[n("i",{class:"fas fa-spinner fa-spin"},null,-1),n("p",null,"Searching...",-1)])])):h(me).searchError.value?(F(),r("div",ue,[s[26]||(s[26]=n("i",{class:"fas fa-exclamation-circle"},null,-1)),n("p",null,f(h(me).searchError.value),1)])):h(me).searchQuery.value?0===h(me).filteredResults.value.length&&h(me).searchQuery.value?(F(),r("div",oe,[...s[28]||(s[28]=[n("i",{class:"fas fa-film-slash"},null,-1),n("h2",null,"No Results Found",-1),n("p",null,"Try adjusting your search or filters",-1)])])):(F(),r("div",ve,[(F(!0),r(p,null,k(h(me).groupedResults.value,(e,s)=>(F(),r("div",{key:s,class:"results-group"},[n("div",de,[n("i",{class:d(h(Fe).getTypeIcon(s))},null,2),n("h2",null,f(h(Fe).formatTypeName(s)),1),n("span",he,f(e.length),1)]),n("div",fe,[(F(!0),r(p,null,k(e,e=>(F(),b(N,{key:e.Id,item:e,"image-url":Re(e),onClick:s=>(e=>{me.searchQuery.value&&we.trackSearchEvent(me.searchQuery.value,{genres:me.filters.value.genres,studios:me.filters.value.studios,itemTypes:me.filters.value.itemTypes},e.Id),ye.push({name:"Details",params:{itemId:e.Id}})})(e)},null,8,["item","image-url","onClick"]))),128))])]))),128))])):(F(),r("div",ce,[...s[27]||(s[27]=[n("i",{class:"fas fa-search"},null,-1),n("h2",null,"Search Your Library",-1),n("p",null,"Find movies, TV shows, episodes, and more",-1)])]))])])]);var a}}}),[["__scopeId","data-v-40f683e7"]]);export{ye as default};
